@model Gallery



<h2>@Html.DisplayFor(t => t.Title)</h2>
<div class="row">
    @{
        var total = Model.ImageReferences.Count();
        const int maxInRow = 4;
        var totalRows = Math.Ceiling((double)total / (double)maxInRow);

    }
        
        @for (var counter = 0; counter < total; counter++)
        {
            if (counter == 0 || counter % 6 == 0)
            {
                @Html.Raw("<div class=\"row\" >") 
            }

            <div class="col-md-2">
                <img src="@Url.Action("T", "ImageServer", new { galleryId = Model.Id, imageId = Model.ImageReferences[counter].Id })" />
                <label>@Model.ImageReferences[counter].Title</label><br />
                @Html.ActionLink("View Image", "ViewImage", "Gallery", new { galleryId = Model.Id, imageId = Model.ImageReferences[counter].Id } )
            </div>

            @if (counter > 0 && counter % 6 == 0)
            {
                @Html.Raw("</div>")
            }
        }
       
</div>
