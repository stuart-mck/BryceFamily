@model BryceFamily.Web.MVC.Models.Person



<div>
    <div class="parents">
        <ul>
            <li>
                <div class="ancestorLink">&nbsp;</div>
                <div class="familyMember gender @Model.Gender"><span><b>@Model.LastName</b>,  @Model.FirstName @Model.MiddleName</span><br />
                @if (Model.DateOfDeath.HasValue)
                {
                    <span>Date Of Death: @Model.DateOfDeath.Value.ToString("dd MMM yyyy")</span><br />
                }
                @if (Model.Stories.Any())
                {
                    <span>View Stories</span><br />
                }
                @if (Model.Galleries.Any())
                {
                    <span>View Galleries</span><br />
                }
                @Html.ActionLink("Details", "Person", "People", new { id = Model.Id })<br/>
                @Html.ActionLink("Zoom", "Tree", "History", new { id = Model.Id})
                </div>
            </li>
            @if (Model.Unions.Any())
            {
                var union = Model.Unions.First();
                Person partner = null;
                if (union.Partner1 != null)
                {
                    partner = union.Partner1.Id == Model.Id ? union.Partner2 : union.Partner1;
                }
                else if (union.Partner2 != null)
                {

                    partner = union.Partner2.Id == Model.Id ? union.Partner2 : null;
                }
                <li>
                    <div>&nbsp;</div>
                    <div class="familyMember spouse gender @partner.Gender">
                        <span><b>@partner.LastName</b>,  @partner.FirstName @partner.MiddleName</span><br/>
                        @if (partner.Stories.Any())
                    {
                            <span>@Html.ActionLink("View Stories", "Stories", "History", new { id = partner.Id})</span><br />
                        }
                        @if (partner.Galleries.Any())
                    {
                            <span>View Galleries</span><br />
                        }
                    @Html.ActionLink("Details", "Person", "People", new { id = partner.Id })<br />
                        @Html.ActionLink("Select", "Tree", "History", new { id = Model.Id })
                    </div>
                </li>
            }
        </ul>
    </div>
    
</div>
